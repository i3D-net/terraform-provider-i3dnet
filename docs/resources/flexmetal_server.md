---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "i3dnet_flexmetal_server Resource - i3dnet"
subcategory: ""
description: |-
  FlexMetal servers are physical servers that can be requested and released at will.
  A How to Guide is available at this URL : https://www.i3d.net/docs/one/Compute/FlexMetal/api/
---

# i3dnet_flexmetal_server (Resource)

FlexMetal servers are physical servers that can be requested and released at will.

A How to Guide is available at this URL : https://www.i3d.net/docs/one/Compute/FlexMetal/api/

## Example Usage

```terraform
# Create a Flexmetal Server
resource "i3dnet_flexmetal_server" "my-server" {
  name          = "TerraFlex-Server"
  location      = "EU: Rotterdam"
  instance_type = "bm7.std.8"
  os = {
    slug = "ubuntu-2404-lts"
    kernel_params = [
      {
        key   = "KEY_A"
        value = "VALUE_A"
      }
    ]
  }
  ssh_key             = ["<YOUR-PUBLIC-SSH-KEY>"]
  post_install_script = "#!/bin/bash\necho \"Hi TerraFlex there!\" > /root/output.txt"
}

# Create a partitioned Flexmetal Server
resource "i3dnet_flexmetal_server" "my-partitioned-server" {
  name          = "TerraFlex-Server"
  location      = "EU: Rotterdam"
  instance_type = "bm7.std.8"
  os = {
    slug = "ubuntu-2404-lts"
    kernel_params = [
      {
        key   = "KEY_A"
        value = "VALUE_A"
      }
    ]
    partitions = [
      {
        "target" : "/boot",
        "filesystem" : "ext2",
        "size" : 4096
      },
      {
        "target" : "/",
        "filesystem" : "ext4",
        "size" : -1
      },
      {
        "target"     = "/custom",
        "filesystem" = "ext4",
        "size"       = 10240
      }
    ]
  }
  ssh_key             = ["<YOUR-PUBLIC-SSH-KEY>"]
  post_install_script = "#!/bin/bash\necho \"Hi TerraFlex there!\" > /root/output.txt"
}

# Create a Talos OS 1.9.0 server
resource "i3dnet_flexmetal_server" "my-talos" {
  name          = "talosHostName"
  location      = "EU: Rotterdam"
  instance_type = "bm7.std.8"
  os = {
    slug = "talos-omni-190"
    kernel_params = [
      {
        key   = "siderolink.api"
        value = "https://siderolink.api/?jointoken=secret"
      },
      {
        key   = "talos.customparam"
        value = "123456"
      }
    ]
  }
}

# Create a Talos OS 1.9.0 server under contract `CONTRACT-123`
resource "i3dnet_flexmetal_server" "my-talos" {
  name          = "MyTalosServer"
  location      = "EU: Rotterdam"
  instance_type = "bm7.std.8"
  os = {
    slug = "talos-omni-190"
    kernel_params = [
      {
        key   = "siderolink.api"
        value = "https://siderolink.api/?jointoken=secret"
      }
    ]
  }
  contract_id = "CONTRACT-123"
}

# Create a Talos OS 1.9.0 server under contract `CONTRACT-123`
# You can add overflow = true to create server even the location is at commited capacity
resource "i3dnet_flexmetal_server" "my-talos" {
  name          = "MyTalosServer"
  location      = "EU: Rotterdam"
  instance_type = "bm7.std.8"
  os = {
    slug = "talos-omni-190"
    kernel_params = [
      {
        key   = "siderolink.api"
        value = "https://siderolink.api/?jointoken=secret"
      }
    ]
  }
  contract_id = "CONTRACT-123"
  overflow    = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `instance_type` (String) Server instance type. Available instance types can be obtained from [/v3/flexMetal/location/{locationId}}/instanceTypes](https://www.i3d.net/docs/api/v3/all#/FlexMetalServer/getFlexMetalLocationInstanceTypes). Use the `name` field from the response.
- `location` (String) Server location. Available locations can be obtained from [/v3/flexMetal/location](https://www.i3d.net/docs/api/v3/all#/FlexMetalServer/getFlexMetalLocations). Use the `name` field from the response.
- `name` (String) Server name or hostname, depending on the chosen OS. E.g. Talos requires a hostname but regular Linux OSs work with either.
- `os` (Attributes) Server operating system. (see [below for nested schema](#nestedatt--os))

### Optional

- `contract_id` (String) Represents client contractId. Format is ^[A-Z0-9_\-.]{0,240}$
- `overflow` (Boolean) If true, the server will be created even if the location is at commited capacity. Default is false.
- `post_install_script` (String) Post install script. A shell script (e.g. bash) that will be executed after your OS is installed. Currently only supported for Linux based operating systems.
- `ssh_key` (List of String) A list of SSH keys. You can either supply SSH key UUIDs from stored objects in [/v3/sshKey](https://www.i3d.net/docs/api/v3/all#/SSHKey/getSshKeys) or provide public keys directly. SSH keys are installed for the root user.
- `tags` (List of String) A list of tags. There is a maximum of 60 tags per server. Each tag must adhere to this pattern: ^[A-Za-z0-9_:-]{1,64}$

### Read-Only

- `created_at` (Number) Server creation timestamp.
- `delivered_at` (Number) Server delivery timestamp.
- `ip_addresses` (Attributes List) Server IP address details. (see [below for nested schema](#nestedatt--ip_addresses))
- `released_at` (Number) Server release timestamp.
- `status` (String) Server delivery status.<br /><li><ul>created</ul><ul>discovering</ul><ul>discovered</ul><ul>allocating</ul><ul>allocated</ul><ul>configuring_network</ul><ul>network_configured</ul><ul>provisioning</ul><ul>provisioned</ul><ul>delivered</ul><ul>failed</ul><ul>releasing</ul><ul>released</ul></li>
- `status_message` (String) Status message.
- `uuid` (String) Server UUID.

<a id="nestedatt--os"></a>
### Nested Schema for `os`

Required:

- `slug` (String) Identifier of the OS. Available operating systems can be obtained from [/v3/operatingsystem](https://www.i3d.net/docs/api/v3/all#/OperatingSystem/getOperatingsystems). Use the `slug` field from the response.

Optional:

- `kernel_params` (Attributes List) Kernel params for the PXE stage of the OS installation. Most operating systems do not require these, but e.g. Talos does. (see [below for nested schema](#nestedatt--os--kernel_params))
- `partitions` (Attributes List) Custom partitions for the OS installation. If not provided, the default partitioning scheme will be used. (see [below for nested schema](#nestedatt--os--partitions))

<a id="nestedatt--os--kernel_params"></a>
### Nested Schema for `os.kernel_params`

Required:

- `key` (String) Key of the kernel param
- `value` (String) Value of the kernel param


<a id="nestedatt--os--partitions"></a>
### Nested Schema for `os.partitions`

Required:

- `filesystem` (String) Type of filesystem to use for the target. Allowed: ext2, ext3, ext4, xfs
- `size` (Number) The size of the partition, in MB. Use -1 to indicate usage of the remaining space on the disk.
- `target` (String) Mount point for the partition



<a id="nestedatt--ip_addresses"></a>
### Nested Schema for `ip_addresses`

Read-Only:

- `ip_address` (String) Server IP address.

## Import

Import is supported using the following syntax:

```shell
terraform import i3dnet_flexmetal_server.my-server uuid
```
